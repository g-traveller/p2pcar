(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18370,e=>{e.v({badge:"VehicleCard-module__zCVgeW__badge",badges:"VehicleCard-module__zCVgeW__badges",bookButton:"VehicleCard-module__zCVgeW__bookButton",card:"VehicleCard-module__zCVgeW__card",content:"VehicleCard-module__zCVgeW__content",favoriteButton:"VehicleCard-module__zCVgeW__favoriteButton",footer:"VehicleCard-module__zCVgeW__footer",header:"VehicleCard-module__zCVgeW__header",host:"VehicleCard-module__zCVgeW__host",hostAvatar:"VehicleCard-module__zCVgeW__hostAvatar",hostInfo:"VehicleCard-module__zCVgeW__hostInfo",hostName:"VehicleCard-module__zCVgeW__hostName",hostTrips:"VehicleCard-module__zCVgeW__hostTrips",image:"VehicleCard-module__zCVgeW__image",imageContainer:"VehicleCard-module__zCVgeW__imageContainer",location:"VehicleCard-module__zCVgeW__location",name:"VehicleCard-module__zCVgeW__name",price:"VehicleCard-module__zCVgeW__price",priceUnit:"VehicleCard-module__zCVgeW__priceUnit",priceValue:"VehicleCard-module__zCVgeW__priceValue",rating:"VehicleCard-module__zCVgeW__rating",ratingValue:"VehicleCard-module__zCVgeW__ratingValue",reviewCount:"VehicleCard-module__zCVgeW__reviewCount",spec:"VehicleCard-module__zCVgeW__spec",specs:"VehicleCard-module__zCVgeW__specs"})},44243,e=>{e.v({active:"VehicleGrid-module__7DL0oW__active",count:"VehicleGrid-module__7DL0oW__count",ellipsis:"VehicleGrid-module__7DL0oW__ellipsis",emptyContainer:"VehicleGrid-module__7DL0oW__emptyContainer",emptyText:"VehicleGrid-module__7DL0oW__emptyText",errorContainer:"VehicleGrid-module__7DL0oW__errorContainer",errorText:"VehicleGrid-module__7DL0oW__errorText",grid:"VehicleGrid-module__7DL0oW__grid",gridContainer:"VehicleGrid-module__7DL0oW__gridContainer",header:"VehicleGrid-module__7DL0oW__header",loadingContainer:"VehicleGrid-module__7DL0oW__loadingContainer",loadingText:"VehicleGrid-module__7DL0oW__loadingText",pageButton:"VehicleGrid-module__7DL0oW__pageButton",pagination:"VehicleGrid-module__7DL0oW__pagination",retryButton:"VehicleGrid-module__7DL0oW__retryButton",sortSelect:"VehicleGrid-module__7DL0oW__sortSelect",spin:"VehicleGrid-module__7DL0oW__spin",spinner:"VehicleGrid-module__7DL0oW__spinner",title:"VehicleGrid-module__7DL0oW__title"})},39574,e=>{"use strict";var a=e.i(94187),i=e.i(95594),l=e.i(18370);function s({vehicle:e}){return(0,a.jsxs)("div",{className:l.default.card,children:[(0,a.jsxs)("div",{className:l.default.imageContainer,children:[(0,a.jsx)("img",{src:e.image,alt:e.name,className:l.default.image}),(0,a.jsx)("button",{className:l.default.favoriteButton,"aria-label":"收藏",children:(0,a.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:(0,a.jsx)("path",{d:"M10 3.5c-2.5-3-7-2.5-7 2 0 3.5 7 9.5 7 9.5s7-6 7-9.5c0-4.5-4.5-5-7-2z",stroke:"currentColor",strokeWidth:"1.5",fill:"none"})})}),(0,a.jsx)("div",{className:l.default.badges,children:e.badges.map(e=>(0,a.jsx)("span",{className:l.default.badge,children:e},e))})]}),(0,a.jsxs)("div",{className:l.default.content,children:[(0,a.jsxs)("div",{className:l.default.header,children:[(0,a.jsx)("h3",{className:l.default.name,children:e.name}),(0,a.jsxs)("div",{className:l.default.rating,children:[(0,a.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,a.jsx)("path",{d:"M8 2l1.8 3.6 4 .6-2.9 2.8.7 4-3.6-1.9-3.6 1.9.7-4-2.9-2.8 4-.6L8 2z",fill:"#F59E0B"})}),(0,a.jsx)("span",{className:l.default.ratingValue,children:e.rating}),(0,a.jsxs)("span",{className:l.default.reviewCount,children:["(",e.reviewCount,")"]})]})]}),(0,a.jsxs)("div",{className:l.default.location,children:[(0,a.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,a.jsx)("path",{d:"M8 2C5.24 2 3 4.24 3 7c0 2.4 5 9 5 9s5-6.6 5-9c0-2.76-2.24-5-5-5zm0 6.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z",fill:"#6B7280"})}),(0,a.jsx)("span",{children:e.location})]}),(0,a.jsxs)("div",{className:l.default.specs,children:[(0,a.jsxs)("div",{className:l.default.spec,children:[(0,a.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,a.jsx)("path",{d:"M2 6h12v8H2zM3 3h2v3H3zm8 0h2v3h-2zM4 9h1v2H4zm3 0h1v2H7zm3 0h1v2h-1z",fill:"#6B7280"})}),(0,a.jsxs)("span",{children:[e.seats,"座"]})]}),(0,a.jsxs)("div",{className:l.default.spec,children:[(0,a.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,a.jsx)("circle",{cx:"5",cy:"10",r:"2",fill:"#6B7280"}),(0,a.jsx)("circle",{cx:"11",cy:"10",r:"2",fill:"#6B7280"}),(0,a.jsx)("path",{d:"M2 6h12v4H2z",fill:"#6B7280"})]}),(0,a.jsx)("span",{children:e.transmission})]}),(0,a.jsxs)("div",{className:l.default.spec,children:[(0,a.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,a.jsx)("path",{d:"M8 2l1 4h4l-3 3 1 4-3-2-3 2 1-4-3-3h4z",fill:"#6B7280"})}),(0,a.jsx)("span",{children:e.fuel})]})]}),(0,a.jsxs)("div",{className:l.default.host,children:[(0,a.jsx)("div",{className:l.default.hostAvatar,children:e.hostInitial}),(0,a.jsxs)("div",{className:l.default.hostInfo,children:[(0,a.jsx)("div",{className:l.default.hostName,children:e.hostName}),(0,a.jsxs)("div",{className:l.default.hostTrips,children:[e.trips,"次行程"]})]})]}),(0,a.jsxs)("div",{className:l.default.footer,children:[(0,a.jsxs)("div",{className:l.default.price,children:[(0,a.jsxs)("div",{className:l.default.priceValue,children:["¥",e.price]}),(0,a.jsx)("div",{className:l.default.priceUnit,children:"每天"})]}),(0,a.jsx)("button",{className:l.default.bookButton,children:"立即预订"})]})]})]})}function t(e){var a;let i=e.host?.name||"车主",l=i.charAt(0),s=[];e.host?.isSuperHost&&s.push("超级车主"),e.instantBook&&s.push("即时预订");let t=e.images&&e.images.length>0?e.images[0]:e.image||"https://images.unsplash.com/photo-1618843479313-40f8afb4b4d8?w=400&h=250&fit=crop";return{id:e.id,name:e.name,image:t,rating:Number(e.rating)||0,reviewCount:e.reviewCount||0,location:e.location,seats:e.seats,transmission:"AUTOMATIC"===e.transmission?"自动":"手动",fuel:({PETROL:"汽油",ELECTRIC:"电动",HYBRID:"混合",DIESEL:"柴油"})[a=e.fuel]||a,hostName:i,hostInitial:l,trips:e.host?.trips||0,price:Number(e.price)||0,badges:s}}async function d(e){try{let a=new URLSearchParams;e?.location&&a.append("location",e.location),e?.startDate&&a.append("startDate",e.startDate),e?.endDate&&a.append("endDate",e.endDate),e?.minPrice!==void 0&&a.append("minPrice",e.minPrice.toString()),e?.maxPrice!==void 0&&a.append("maxPrice",e.maxPrice.toString()),e?.seats!==void 0&&a.append("seats",e.seats.toString()),e?.transmission&&a.append("transmission",e.transmission),e?.fuelType&&a.append("fuelType",e.fuelType),e?.brand&&a.append("brand",e.brand),e?.sortBy&&a.append("sortBy",e.sortBy),a.append("page",(e?.page||0).toString()),a.append("size",(e?.size||20).toString());let i=`http://localhost:8080/api/v1/vehicles${a.toString()?"?"+a.toString():""}`,l=await fetch(i,{method:"GET",headers:{"Content-Type":"application/json"}});if(!l.ok)throw Error(`API error: ${l.status} ${l.statusText}`);let s=await l.json();if(200!==s.code||!s.data)throw Error(s.message||"Failed to fetch vehicles");let{items:d,total:r,totalPages:n}=s.data;return{vehicles:d.map(t),total:r,totalPages:n}}catch(e){throw console.error("Error fetching vehicles:",e),e}}e.i(85171);var r=e.i(44243);function n(){let[e,l]=(0,i.useState)([]),[t,n]=(0,i.useState)(!0),[o,c]=(0,i.useState)(null),[h,u]=(0,i.useState)(0),[_,m]=(0,i.useState)("recommended"),[p,g]=(0,i.useState)(0);(0,i.useEffect)(()=>{f()},[_,p]);let f=async()=>{try{n(!0),c(null);let{vehicles:e,total:a}=await d({sortBy:{recommended:"rating_desc","price-low":"price_asc","price-high":"price_desc",rating:"rating_desc"}[_],page:p,size:20});l(e),u(a)}catch(e){console.error("Failed to fetch vehicles:",e),c(e instanceof Error?e.message:"加载车辆数据失败，请稍后重试")}finally{n(!1)}},x=Math.ceil(h/20),v=e=>{g(e),window.scrollTo({top:0,behavior:"smooth"})},j=e=>{m(e.target.value),g(0)};return t?(0,a.jsxs)("div",{className:r.default.gridContainer,children:[(0,a.jsx)("div",{className:r.default.header,children:(0,a.jsxs)("h2",{className:r.default.title,children:["可租车辆",(0,a.jsx)("span",{className:r.default.count,children:"(加载中...)"})]})}),(0,a.jsxs)("div",{className:r.default.loadingContainer,children:[(0,a.jsx)("div",{className:r.default.spinner}),(0,a.jsx)("p",{className:r.default.loadingText,children:"正在加载车辆数据..."})]})]}):o?(0,a.jsxs)("div",{className:r.default.gridContainer,children:[(0,a.jsx)("div",{className:r.default.header,children:(0,a.jsxs)("h2",{className:r.default.title,children:["可租车辆",(0,a.jsx)("span",{className:r.default.count,children:"(0)"})]})}),(0,a.jsxs)("div",{className:r.default.errorContainer,children:[(0,a.jsx)("p",{className:r.default.errorText,children:o}),(0,a.jsx)("button",{onClick:f,className:r.default.retryButton,children:"重新加载"})]})]}):0===e.length?(0,a.jsxs)("div",{className:r.default.gridContainer,children:[(0,a.jsxs)("div",{className:r.default.header,children:[(0,a.jsxs)("h2",{className:r.default.title,children:["可租车辆",(0,a.jsx)("span",{className:r.default.count,children:"(0)"})]}),(0,a.jsxs)("select",{className:r.default.sortSelect,value:_,onChange:j,children:[(0,a.jsx)("option",{value:"recommended",children:"推荐排序"}),(0,a.jsx)("option",{value:"price-low",children:"价格从低到高"}),(0,a.jsx)("option",{value:"price-high",children:"价格从高到低"}),(0,a.jsx)("option",{value:"rating",children:"评分最高"})]})]}),(0,a.jsx)("div",{className:r.default.emptyContainer,children:(0,a.jsx)("p",{className:r.default.emptyText,children:"暂无可用车辆"})})]}):(0,a.jsxs)("div",{className:r.default.gridContainer,children:[(0,a.jsxs)("div",{className:r.default.header,children:[(0,a.jsxs)("h2",{className:r.default.title,children:["可租车辆",(0,a.jsxs)("span",{className:r.default.count,children:["(",h,")"]})]}),(0,a.jsxs)("select",{className:r.default.sortSelect,value:_,onChange:j,children:[(0,a.jsx)("option",{value:"recommended",children:"推荐排序"}),(0,a.jsx)("option",{value:"price-low",children:"价格从低到高"}),(0,a.jsx)("option",{value:"price-high",children:"价格从高到低"}),(0,a.jsx)("option",{value:"rating",children:"评分最高"})]})]}),(0,a.jsx)("div",{className:r.default.grid,children:e.map(e=>(0,a.jsx)(s,{vehicle:e},e.id))}),(()=>{if(x<=1)return null;let e=[];if(x<=5)for(let a=0;a<x;a++)e.push(a);else{e.push(0),p>2&&e.push("...");let a=Math.max(1,p-1),i=Math.min(x-2,p+1);for(let l=a;l<=i;l++)e.push(l);p<x-3&&e.push("..."),e.push(x-1)}return(0,a.jsxs)("div",{className:r.default.pagination,children:[(0,a.jsx)("button",{className:r.default.pageButton,onClick:()=>v(p-1),disabled:0===p,children:"上一页"}),e.map((e,i)=>"..."===e?(0,a.jsx)("span",{className:r.default.ellipsis,children:"..."},`ellipsis-${i}`):(0,a.jsx)("button",{className:`${r.default.pageButton} ${p===e?r.default.active:""}`,onClick:()=>v(e),children:e+1},e)),(0,a.jsx)("button",{className:r.default.pageButton,onClick:()=>v(p+1),disabled:p===x-1,children:"下一页"})]})})()]})}e.s(["default",()=>n],39574)}]);