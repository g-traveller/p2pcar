module.exports=[18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},63406,(a,b,c)=>{"use strict";b.exports=a.r(18622)},52553,(a,b,c)=>{"use strict";b.exports=a.r(63406).vendored["react-ssr"].ReactJsxRuntime},39188,(a,b,c)=>{"use strict";b.exports=a.r(63406).vendored["react-ssr"].React},25436,a=>{"use strict";let b=process.env.NEXT_PUBLIC_API_URL||"http://localhost:8080";class c{static baseUrl=`${b}/api/v1/auth`;static async login(a){let b=await fetch(`${this.baseUrl}/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!b.ok)throw await this.extractErrorData(b);return b.json()}static async register(a){let b=await fetch(`${this.baseUrl}/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!b.ok)throw await this.extractErrorData(b);return b.json()}static async logout(a){let b=await fetch(`${this.baseUrl}/logout`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`}});if(!b.ok)throw await this.extractErrorData(b)}static async forgotPassword(a){let b=await fetch(`${this.baseUrl}/forgot-password`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a})});if(!b.ok)throw await this.extractErrorData(b)}static async resetPassword(a,b){let c=await fetch(`${this.baseUrl}/reset-password`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:a,password:b})});if(!c.ok)throw await this.extractErrorData(c)}static async verifyEmail(a){let b=await fetch(`${this.baseUrl}/verify-email`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:a})});if(!b.ok)throw await this.extractErrorData(b)}static async sendVerificationCode(a){let b=await fetch(`${this.baseUrl}/send-verification-code`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!b.ok)throw await this.extractErrorData(b);return b.json()}static async getWeChatAuthorizeUrl(){let a=await fetch(`${this.baseUrl}/oauth/wechat/authorize-url`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!a.ok)throw await this.extractErrorData(a);return a.json()}static async weChatOAuthCallback(a){let b=await fetch(`${this.baseUrl}/oauth/wechat/callback`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!b.ok)throw await this.extractErrorData(b);return b.json()}static async extractErrorData(a){let b={code:a.status,message:`HTTP error! status: ${a.status}`,response:{status:a.status,data:null}};try{let c=a.headers.get("content-type");if(c&&c.includes("application/json")){let c=await a.json();b={...b,...c,response:{...b.response,data:c}}}else{let c=await a.text();b.message=c||b.message}}catch(a){}let c=Error(b.message||"Request failed");throw c.response=b.response,c.code=b.code,c}}a.s(["default",0,c,"getWeChatAuthorizeUrl",0,()=>c.getWeChatAuthorizeUrl(),"login",0,a=>c.login(a),"register",0,a=>c.register(a),"sendVerificationCode",0,a=>c.sendVerificationCode(a),"weChatOAuthCallback",0,a=>c.weChatOAuthCallback(a)])},90793,a=>{"use strict";var b=a.i(52553),c=a.i(39188),d=a.i(25436);let e=(0,c.createContext)(void 0);function f({children:a}){let f=function(){let[a,b]=(0,c.useState)(null),[e,f]=(0,c.useState)(!1),[g,h]=(0,c.useState)(null);(0,c.useEffect)(()=>{let a=localStorage.getItem("auth_token")||sessionStorage.getItem("auth_token"),c=localStorage.getItem("auth_user")||sessionStorage.getItem("auth_user");if(a&&c)try{b(JSON.parse(c))}catch(a){console.error("Failed to parse user data:",a)}},[]);let i=(0,c.useCallback)(async a=>{f(!0),h(null);try{let c=await d.default.login(a);if(200===c.code&&c.data){let{token:d,user:e}=c.data;a.rememberMe?(localStorage.setItem("auth_token",d),localStorage.setItem("auth_user",JSON.stringify(e))):(sessionStorage.setItem("auth_token",d),sessionStorage.setItem("auth_user",JSON.stringify(e))),b(e)}else h(c.message||"登录失败")}catch(a){throw h(a instanceof Error?a.message:"登录失败，请重试"),a}finally{f(!1)}},[]),j=(0,c.useCallback)(async a=>{f(!0),h(null);try{let c=await d.default.register(a);if(200===c.code&&c.data){let{token:a,user:d}=c.data;localStorage.setItem("auth_token",a),localStorage.setItem("auth_user",JSON.stringify(d)),b(d)}else h(c.message||"注册失败")}catch(a){throw h(a instanceof Error?a.message:"注册失败，请重试"),a}finally{f(!1)}},[]);return{user:a,isLoading:e,error:g,login:i,register:j,logout:(0,c.useCallback)(async()=>{let a=localStorage.getItem("auth_token")||sessionStorage.getItem("auth_token");try{a&&await d.default.logout(a)}catch(a){console.error("Logout error:",a)}finally{localStorage.removeItem("auth_token"),localStorage.removeItem("auth_user"),sessionStorage.removeItem("auth_token"),sessionStorage.removeItem("auth_user"),b(null)}},[]),clearError:(0,c.useCallback)(()=>{h(null)},[])}}();return(0,b.jsx)(e.Provider,{value:f,children:a})}function g(){let a=(0,c.useContext)(e);if(void 0===a)throw Error("useAuthContext must be used within an AuthProvider");return a}a.s(["AuthProvider",()=>f,"default",0,e,"useAuthContext",()=>g],90793)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__537fba54._.js.map