module.exports=[18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},63406,(a,b,c)=>{"use strict";b.exports=a.r(18622)},52553,(a,b,c)=>{"use strict";b.exports=a.r(63406).vendored["react-ssr"].ReactJsxRuntime},39188,(a,b,c)=>{"use strict";b.exports=a.r(63406).vendored["react-ssr"].React},52703,a=>{a.v({badge:"VehicleCard-module__zCVgeW__badge",badges:"VehicleCard-module__zCVgeW__badges",bookButton:"VehicleCard-module__zCVgeW__bookButton",card:"VehicleCard-module__zCVgeW__card",content:"VehicleCard-module__zCVgeW__content",favoriteButton:"VehicleCard-module__zCVgeW__favoriteButton",footer:"VehicleCard-module__zCVgeW__footer",header:"VehicleCard-module__zCVgeW__header",host:"VehicleCard-module__zCVgeW__host",hostAvatar:"VehicleCard-module__zCVgeW__hostAvatar",hostInfo:"VehicleCard-module__zCVgeW__hostInfo",hostName:"VehicleCard-module__zCVgeW__hostName",hostTrips:"VehicleCard-module__zCVgeW__hostTrips",image:"VehicleCard-module__zCVgeW__image",imageContainer:"VehicleCard-module__zCVgeW__imageContainer",location:"VehicleCard-module__zCVgeW__location",name:"VehicleCard-module__zCVgeW__name",price:"VehicleCard-module__zCVgeW__price",priceUnit:"VehicleCard-module__zCVgeW__priceUnit",priceValue:"VehicleCard-module__zCVgeW__priceValue",rating:"VehicleCard-module__zCVgeW__rating",ratingValue:"VehicleCard-module__zCVgeW__ratingValue",reviewCount:"VehicleCard-module__zCVgeW__reviewCount",spec:"VehicleCard-module__zCVgeW__spec",specs:"VehicleCard-module__zCVgeW__specs"})},3096,a=>{a.v({active:"VehicleGrid-module__7DL0oW__active",count:"VehicleGrid-module__7DL0oW__count",ellipsis:"VehicleGrid-module__7DL0oW__ellipsis",emptyContainer:"VehicleGrid-module__7DL0oW__emptyContainer",emptyText:"VehicleGrid-module__7DL0oW__emptyText",errorContainer:"VehicleGrid-module__7DL0oW__errorContainer",errorText:"VehicleGrid-module__7DL0oW__errorText",grid:"VehicleGrid-module__7DL0oW__grid",gridContainer:"VehicleGrid-module__7DL0oW__gridContainer",header:"VehicleGrid-module__7DL0oW__header",loadingContainer:"VehicleGrid-module__7DL0oW__loadingContainer",loadingText:"VehicleGrid-module__7DL0oW__loadingText",pageButton:"VehicleGrid-module__7DL0oW__pageButton",pagination:"VehicleGrid-module__7DL0oW__pagination",retryButton:"VehicleGrid-module__7DL0oW__retryButton",sortSelect:"VehicleGrid-module__7DL0oW__sortSelect",spin:"VehicleGrid-module__7DL0oW__spin",spinner:"VehicleGrid-module__7DL0oW__spinner",title:"VehicleGrid-module__7DL0oW__title"})},71902,a=>{"use strict";var b=a.i(52553),c=a.i(39188),d=a.i(52703);function e({vehicle:a}){return(0,b.jsxs)("div",{className:d.default.card,children:[(0,b.jsxs)("div",{className:d.default.imageContainer,children:[(0,b.jsx)("img",{src:a.image,alt:a.name,className:d.default.image}),(0,b.jsx)("button",{className:d.default.favoriteButton,"aria-label":"收藏",children:(0,b.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:(0,b.jsx)("path",{d:"M10 3.5c-2.5-3-7-2.5-7 2 0 3.5 7 9.5 7 9.5s7-6 7-9.5c0-4.5-4.5-5-7-2z",stroke:"currentColor",strokeWidth:"1.5",fill:"none"})})}),(0,b.jsx)("div",{className:d.default.badges,children:a.badges.map(a=>(0,b.jsx)("span",{className:d.default.badge,children:a},a))})]}),(0,b.jsxs)("div",{className:d.default.content,children:[(0,b.jsxs)("div",{className:d.default.header,children:[(0,b.jsx)("h3",{className:d.default.name,children:a.name}),(0,b.jsxs)("div",{className:d.default.rating,children:[(0,b.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,b.jsx)("path",{d:"M8 2l1.8 3.6 4 .6-2.9 2.8.7 4-3.6-1.9-3.6 1.9.7-4-2.9-2.8 4-.6L8 2z",fill:"#F59E0B"})}),(0,b.jsx)("span",{className:d.default.ratingValue,children:a.rating}),(0,b.jsxs)("span",{className:d.default.reviewCount,children:["(",a.reviewCount,")"]})]})]}),(0,b.jsxs)("div",{className:d.default.location,children:[(0,b.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,b.jsx)("path",{d:"M8 2C5.24 2 3 4.24 3 7c0 2.4 5 9 5 9s5-6.6 5-9c0-2.76-2.24-5-5-5zm0 6.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z",fill:"#6B7280"})}),(0,b.jsx)("span",{children:a.location})]}),(0,b.jsxs)("div",{className:d.default.specs,children:[(0,b.jsxs)("div",{className:d.default.spec,children:[(0,b.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,b.jsx)("path",{d:"M2 6h12v8H2zM3 3h2v3H3zm8 0h2v3h-2zM4 9h1v2H4zm3 0h1v2H7zm3 0h1v2h-1z",fill:"#6B7280"})}),(0,b.jsxs)("span",{children:[a.seats,"座"]})]}),(0,b.jsxs)("div",{className:d.default.spec,children:[(0,b.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,b.jsx)("circle",{cx:"5",cy:"10",r:"2",fill:"#6B7280"}),(0,b.jsx)("circle",{cx:"11",cy:"10",r:"2",fill:"#6B7280"}),(0,b.jsx)("path",{d:"M2 6h12v4H2z",fill:"#6B7280"})]}),(0,b.jsx)("span",{children:a.transmission})]}),(0,b.jsxs)("div",{className:d.default.spec,children:[(0,b.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,b.jsx)("path",{d:"M8 2l1 4h4l-3 3 1 4-3-2-3 2 1-4-3-3h4z",fill:"#6B7280"})}),(0,b.jsx)("span",{children:a.fuel})]})]}),(0,b.jsxs)("div",{className:d.default.host,children:[(0,b.jsx)("div",{className:d.default.hostAvatar,children:a.hostInitial}),(0,b.jsxs)("div",{className:d.default.hostInfo,children:[(0,b.jsx)("div",{className:d.default.hostName,children:a.hostName}),(0,b.jsxs)("div",{className:d.default.hostTrips,children:[a.trips,"次行程"]})]})]}),(0,b.jsxs)("div",{className:d.default.footer,children:[(0,b.jsxs)("div",{className:d.default.price,children:[(0,b.jsxs)("div",{className:d.default.priceValue,children:["¥",a.price]}),(0,b.jsx)("div",{className:d.default.priceUnit,children:"每天"})]}),(0,b.jsx)("button",{className:d.default.bookButton,children:"立即预订"})]})]})]})}function f(a){var b;let c=a.host?.name||"车主",d=c.charAt(0),e=[];a.host?.isSuperHost&&e.push("超级车主"),a.instantBook&&e.push("即时预订");let f=a.images&&a.images.length>0?a.images[0]:a.image||"https://images.unsplash.com/photo-1618843479313-40f8afb4b4d8?w=400&h=250&fit=crop";return{id:a.id,name:a.name,image:f,rating:Number(a.rating)||0,reviewCount:a.reviewCount||0,location:a.location,seats:a.seats,transmission:"AUTOMATIC"===a.transmission?"自动":"手动",fuel:({PETROL:"汽油",ELECTRIC:"电动",HYBRID:"混合",DIESEL:"柴油"})[b=a.fuel]||b,hostName:c,hostInitial:d,trips:a.host?.trips||0,price:Number(a.price)||0,badges:e}}async function g(a){try{let b=new URLSearchParams;a?.location&&b.append("location",a.location),a?.startDate&&b.append("startDate",a.startDate),a?.endDate&&b.append("endDate",a.endDate),a?.minPrice!==void 0&&b.append("minPrice",a.minPrice.toString()),a?.maxPrice!==void 0&&b.append("maxPrice",a.maxPrice.toString()),a?.seats!==void 0&&b.append("seats",a.seats.toString()),a?.transmission&&b.append("transmission",a.transmission),a?.fuelType&&b.append("fuelType",a.fuelType),a?.brand&&b.append("brand",a.brand),a?.sortBy&&b.append("sortBy",a.sortBy),b.append("page",(a?.page||0).toString()),b.append("size",(a?.size||20).toString());let c=`http://localhost:8080/api/v1/vehicles${b.toString()?"?"+b.toString():""}`,d=await fetch(c,{method:"GET",headers:{"Content-Type":"application/json"}});if(!d.ok)throw Error(`API error: ${d.status} ${d.statusText}`);let e=await d.json();if(200!==e.code||!e.data)throw Error(e.message||"Failed to fetch vehicles");let{items:g,total:h,totalPages:i}=e.data;return{vehicles:g.map(f),total:h,totalPages:i}}catch(a){throw console.error("Error fetching vehicles:",a),a}}var h=a.i(3096);function i(){let[a,d]=(0,c.useState)([]),[f,i]=(0,c.useState)(!0),[j,k]=(0,c.useState)(null),[l,m]=(0,c.useState)(0),[n,o]=(0,c.useState)("recommended"),[p,q]=(0,c.useState)(0);(0,c.useEffect)(()=>{r()},[n,p]);let r=async()=>{try{i(!0),k(null);let{vehicles:a,total:b}=await g({sortBy:{recommended:"rating_desc","price-low":"price_asc","price-high":"price_desc",rating:"rating_desc"}[n],page:p,size:20});d(a),m(b)}catch(a){console.error("Failed to fetch vehicles:",a),k(a instanceof Error?a.message:"加载车辆数据失败，请稍后重试")}finally{i(!1)}},s=Math.ceil(l/20),t=a=>{q(a),window.scrollTo({top:0,behavior:"smooth"})},u=a=>{o(a.target.value),q(0)};return f?(0,b.jsxs)("div",{className:h.default.gridContainer,children:[(0,b.jsx)("div",{className:h.default.header,children:(0,b.jsxs)("h2",{className:h.default.title,children:["可租车辆",(0,b.jsx)("span",{className:h.default.count,children:"(加载中...)"})]})}),(0,b.jsxs)("div",{className:h.default.loadingContainer,children:[(0,b.jsx)("div",{className:h.default.spinner}),(0,b.jsx)("p",{className:h.default.loadingText,children:"正在加载车辆数据..."})]})]}):j?(0,b.jsxs)("div",{className:h.default.gridContainer,children:[(0,b.jsx)("div",{className:h.default.header,children:(0,b.jsxs)("h2",{className:h.default.title,children:["可租车辆",(0,b.jsx)("span",{className:h.default.count,children:"(0)"})]})}),(0,b.jsxs)("div",{className:h.default.errorContainer,children:[(0,b.jsx)("p",{className:h.default.errorText,children:j}),(0,b.jsx)("button",{onClick:r,className:h.default.retryButton,children:"重新加载"})]})]}):0===a.length?(0,b.jsxs)("div",{className:h.default.gridContainer,children:[(0,b.jsxs)("div",{className:h.default.header,children:[(0,b.jsxs)("h2",{className:h.default.title,children:["可租车辆",(0,b.jsx)("span",{className:h.default.count,children:"(0)"})]}),(0,b.jsxs)("select",{className:h.default.sortSelect,value:n,onChange:u,children:[(0,b.jsx)("option",{value:"recommended",children:"推荐排序"}),(0,b.jsx)("option",{value:"price-low",children:"价格从低到高"}),(0,b.jsx)("option",{value:"price-high",children:"价格从高到低"}),(0,b.jsx)("option",{value:"rating",children:"评分最高"})]})]}),(0,b.jsx)("div",{className:h.default.emptyContainer,children:(0,b.jsx)("p",{className:h.default.emptyText,children:"暂无可用车辆"})})]}):(0,b.jsxs)("div",{className:h.default.gridContainer,children:[(0,b.jsxs)("div",{className:h.default.header,children:[(0,b.jsxs)("h2",{className:h.default.title,children:["可租车辆",(0,b.jsxs)("span",{className:h.default.count,children:["(",l,")"]})]}),(0,b.jsxs)("select",{className:h.default.sortSelect,value:n,onChange:u,children:[(0,b.jsx)("option",{value:"recommended",children:"推荐排序"}),(0,b.jsx)("option",{value:"price-low",children:"价格从低到高"}),(0,b.jsx)("option",{value:"price-high",children:"价格从高到低"}),(0,b.jsx)("option",{value:"rating",children:"评分最高"})]})]}),(0,b.jsx)("div",{className:h.default.grid,children:a.map(a=>(0,b.jsx)(e,{vehicle:a},a.id))}),(()=>{if(s<=1)return null;let a=[];if(s<=5)for(let b=0;b<s;b++)a.push(b);else{a.push(0),p>2&&a.push("...");let b=Math.max(1,p-1),c=Math.min(s-2,p+1);for(let d=b;d<=c;d++)a.push(d);p<s-3&&a.push("..."),a.push(s-1)}return(0,b.jsxs)("div",{className:h.default.pagination,children:[(0,b.jsx)("button",{className:h.default.pageButton,onClick:()=>t(p-1),disabled:0===p,children:"上一页"}),a.map((a,c)=>"..."===a?(0,b.jsx)("span",{className:h.default.ellipsis,children:"..."},`ellipsis-${c}`):(0,b.jsx)("button",{className:`${h.default.pageButton} ${p===a?h.default.active:""}`,onClick:()=>t(a),children:a+1},a)),(0,b.jsx)("button",{className:h.default.pageButton,onClick:()=>t(p+1),disabled:p===s-1,children:"下一页"})]})})()]})}a.s(["default",()=>i],71902)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__6853e106._.js.map